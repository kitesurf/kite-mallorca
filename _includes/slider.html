{% assign letterstring = "a,b,c,d,e,f,g,h,i,j,k,l,m,n" %}
{% assign letters = letterstring | split: ',' %}

<div class="slider__holder" itemscope itemtype="http://schema.org/ImageGallery">
    <input class="slider__activator"  type="radio" name="slider" id="play1" checked=""/>
    <div class="slider">
        {% for item in site.data.slider.lang[page.lang] %}
          <input class="slider__activator" type="radio" name="slider" id="{{ letters[forloop.index0] }}"/>
        {% endfor %}
        {% for item in site.data.slider.lang[page.lang] %}
          {% if forloop.index == forloop.length %}
            {% assign nextindex = 0 %}
          {% else %}
            {% assign nextindex = forloop.index0 | plus: 1 %}
          {% endif %}
          {% assign nextletter = letters[nextindex] %}
          {% if forloop.index0 == 0 %}
            {% assign previndex = forloop.length | minus: 1 %}
          {% else %}
            {% assign previndex = forloop.index0 | minus: 1 %}
          {% endif %}
          {% assign prevletter = letters[previndex] %}
          <div class="slider__controls">
              <label class="slider__control slider__control--backward" for="{{ prevletter }}"></label>
              <label class="slider__control slider__control--forward" for="{{ nextletter }}"></label>
          </div>
        {% endfor %}
        <div class="slider__track">
          <ul>
            {% for item in site.data.slider.lang[page.lang] %}
            <li class="slider__slide">
              <figure itemprop="associatedMedia" itemscope itemtype="https://schema.org/ImageObject">     
                <picture>
                  <source type="image/webp" data-srcset="{{ item.webp.xl }} 900w,
                  {{ item.webp.m }} 600w,
                  {{ item.webp.s }} 300w">
                  <source type="image/jpeg" data-srcset="{{ item.jpeg.xl }} 900w,
                  {{ item.jpeg.m }} 600w,
                  {{ item.jpeg.s }} 300w">
                  <img src="{{ item.image }}" srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="{{ item.alt }}" data-sizes="auto" class="lazyload">
                </picture>
                <a class="text_bgd" href="{{ item.link }}">
                <h3><strong>{{ item.title }}</strong></h3>
                <p>{{ item.description }}</p>
                <button class="btn">
                   <strong>{{ item.button_text }}</strong>
                </button>
                </a>              
              </figure>
            </li>            
            {% endfor %}
          </ul>
        </div>
        <div class="slider__indicators">
            {% for item in site.data.slider.lang[page.lang] %}
              <label class="slider__indicator" for="{{ letters[forloop.index0] }}"></label>
            {% endfor %}
        </div>
    </div>
    <label class="slider__control slider__control--backward fake_contr" for="{{ prevletter }}"></label>
    <label class="slider__control slider__control--forward fake_contr" for="{{ nextletter }}"></label>
    <div class="contr_bgd contr_bgd--left"></div>
    <div class="contr_bgd contr_bgd--right"></div>
</div>

<style>
.slider__holder {width: 100%; top: 80px; position: relative; padding-bottom: {{ include.height }}{{ include.unit }}; margin: 0 0 1rem;}
@media only screen and (max-width: 767px){.slider__holder {
top: 60;
  }
}
.slider {
  height: 100%;
  width: 100%;
  overflow: hidden;
  text-align: center;
  position: absolute;
  padding: 0;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}
.slider__controls,
.slider__activator {
  display: none;
}
{% for item in site.data.slider.lang[page.lang] %}
.slider__activator:nth-of-type({{ forloop.index }}):checked ~ .slider__track {
  -webkit-transform: translateX(-{{ forloop.index0 }}00%);
          transform: translateX(-{{ forloop.index0 }}00%);
}
.slider__activator:nth-of-type({{ forloop.index }}):checked ~ .slider__slide:nth-of-type({{ forloop.index }}) {
  transition: opacity 1.5s, -webkit-transform 1.5s;
  transition: opacity 1.5s, transform 1.5s;
  transition: opacity 1.5s, transform 1.5s, -webkit-transform 1.5s;
  top: 0;
  left: 0;
  right: 0;
  opacity: 1;
  -webkit-transform: scale(1);
          transform: scale(1);
}
.slider__activator:nth-of-type({{ forloop.index }}):checked ~ .slider__controls:nth-of-type({{ forloop.index }}) {
  display: block;
  opacity: 1;
}
.slider__activator:nth-of-type({{ forloop.index }}):checked ~ .slider__indicators .slider__indicator:nth-of-type({{ forloop.index }}) {
  opacity: 1;
}
{% endfor %}

.slider__control {
  height: 30px;
  width: 30px;
  margin-top: -15px;
  top: 50%;
  position: absolute;
  display: block;
  cursor: pointer;
  border-width: 5px 5px 0 0;
  border-style: solid;
  border-color: #fffafa;
  opacity: 0.60;
  outline: 0;
  z-index: 3;
} 
.contr_bgd {
  height: 60px;
  width: 50px;
  margin-top: -30px;
  top: 50%;
  position: absolute;
  background-color: #333333;
  opacity: 0.6;
  outline: 0;
  z-index: 2;
}
.text_bgd {
  height: 40%;
  width: 25%;
  bottom: 0px;
  left: 10%;
  position: absolute;
  display: inline-block;
  cursor: pointer;
  background-color: #333333;
  opacity: 0.8;
  outline: 0;
  z-index: 3;
}
.text_bgd > h3,
.text_bgd > p {
  margin-top: 1rem;
  margin-bottom: 0;
  opacity: 1.0;
  color: #ffffff;  
}
.text_bgd > h3 {
  line-height: 1.2;
}
.text_bgd > p {
  font-size: 1.4vw
}
.btn {
  position: relative;
  display: block;
  margin: 10px auto;
  overflow: hidden;
  border-width: 0;
  outline: none;
  border-radius: 1px;
  box-shadow: 0 1px 4px rgba(0, 0, 0, .6);  
  background-color: #ff7f0f;
  color: #ffffff;
}
.slider__slide>figure {
  margin: 0;
}
.slider__slide>figure>picture>img {
  height: auto;
  background-size: cover;
  background-position: center;    
}
.slider__control:hover {
  opacity: 1;
}
.contr_bgd--left {
  left: 0px;
}
.contr_bgd--right {
  right: 0px;
}
.slider__control--backward {
  left: 20px;
  -webkit-transform: rotate(-135deg);
          transform: rotate(-135deg);
}
.slider__control--forward {
  right: 20px;
  -webkit-transform: rotate(45deg);
          transform: rotate(45deg);
}
.slider__indicators {
  position: absolute;
  bottom: 20px;
  width: 100%;
  text-align: center;
}
.slider__indicator {
  height: 25px;
  width: 25px;
  border-radius: 100%;
  display: inline-block;
  z-index: 2;
  cursor: pointer;
  opacity: 0.35;
  margin: 0 2.5px 0 2.5px;
}
.slider__indicator:hover {
  opacity: 0.75;
}
.slider__track {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  padding: 0;
  margin: 0;
  transition: -webkit-transform 1.5s ease 0s;
  transition: transform 1.5s ease 0s;
  transition: transform 1.5s ease 0s, -webkit-transform 1.5s ease 0s;
}
.slider__track .slider__slide {
  display: block;
  top: 0;
  left: 0;
  right: 0;
  opacity: 1;
}
{% for item in site.data.slider.lang[page.lang] %}
.slider__track .slider__slide:nth-of-type({{ forloop.index }}) {
  -webkit-transform: translateX({{ forloop.index0 }}00%);
          transform: translateX({{ forloop.index0 }}00%);
}
{% endfor %}

.slider--scale .slider__slide {
  -webkit-transform: scale(0);
          transform: scale(0);
}
.slider__slide {
  height: auto;
  position: absolute;
  opacity: 0;
  overflow: hidden;
}
.slider__slide .overlay {height: 100%;}
.slider--thumb .slider__indicator {
  height: 30px;
  width: 30px;
}
.slider__indicator {
  background-color: #fafafa;
}
{% for item in site.data.slider.lang[page.lang] %}
.slider__slide:nth-of-type({{ forloop.index }}),
.slider--thumb .slider__indicators .slider__indicator:nth-of-type({{ forloop.index }}) {
  background-size: cover;
  background-position: center;
}
{% endfor %}
/* Calculate AUTOPLAY for BULLETS Magic numbers 0.02% and 4100ms */
{% for item in site.data.slider.lang[page.lang] %}
{% assign pics = forloop.length %}
{% endfor %}

{% assign on_time = 100.0 | divided_by: pics | minus: 0.02 %}
{% assign off_time = 100.0 | divided_by: pics %}
@keyframes label {
  0%, {{ on_time }}% {
    opacity: 0.8;
  }
  {{ off_time }}%, 100% {
    opacity: 0.35;
  }
}

{% for item in site.data.slider.lang[page.lang] %}
{% assign label_all = 41 | times: forloop.length %}
{% assign animation_time = 41 | times: forloop.index | minus: 51 %}
#play1:checked ~ div .slider__indicators .slider__indicator:nth-child({{ forloop.index }}) {
  animation: label {{ label_all }}00ms infinite {{ animation_time }}00ms;
}
{% endfor %}
/* Calculate AUTOPLAY for BULLETS - END */

/* Calculate AUTOPLAY for SLIDES Magische Zahl 8.130081301% */

@keyframes slide {
{% for item in site.data.slider.lang[page.lang] %}
  {% assign perc_counter = forloop.index | minus: 1 %}
  {% assign view_part = 100.0 | divided_by: forloop.length | minus: 8.130081301 %}
  {% assign begin_view = 100.0 | divided_by: forloop.length | times: perc_counter %}
  {% assign end_view = begin_view | plus: view_part %}
    {{ begin_view }}%, {{ end_view }}% { 
      -webkit-transform: translateX(-{{ perc_counter }}00%);
      transform: translateX(-{{ perc_counter }}00%);
  }
{% endfor %}
}


.slider__holder > #play1:checked ~ .slider .slider__track {
  animation: slide {{ label_all }}00ms infinite;  
}
.slider__holder > #play1:checked ~label {
  display: block;
}
/* Calculate AUTOPLAY for SLIDES - END */

.fake_contr {
  display: none;
}
</style>